Feature: School Payment # features/pay_to_school/13_schoolPayment.feature:1
  As a user
  I want to make payments to schools
  So that I can pay school fees and related charges
  Background:   # features/pay_to_school/13_schoolPayment.feature:12

  @smoke @school_payment @pay_to_school @sasai
  Scenario: Process school payment with valid details                       # features/pay_to_school/13_schoolPayment.feature:18
    Given API is available                                                  # steps/common_steps.py:9
    And I am authenticated with valid app token                             # steps/otp_steps.py:9
    And I have valid user token from PIN verification                       # steps/login_devices_steps.py:9
    Given I have valid user authentication                                  # steps/login_devices_steps.py:92
    And I have service type "sasai-app-payment"                             # steps/payment_options_steps.py:16
    When I send school payment options request to "/bff/v2/payment/options" # steps/school_payment_options_steps.py:135
    Then response status code should be 200                                 # steps/common_steps.py:116
    And I extract instrument token from response                            # steps/school_payment_options_steps.py:527
    Given I have school payment details                                     # steps/school_payment_steps.py:29
    And I have biller details with school code "054329"                     # steps/school_payment_steps.py:83
    And I have payment amount 2.0                                           # steps/school_payment_steps.py:94
    When I send school payment request to "/bff/v2/order/utility/payment"   # steps/school_payment_steps.py:306
    Then response status code should be 200                                 # steps/common_steps.py:116
    And response should contain payment confirmation                        # steps/church_payment_steps.py:389

